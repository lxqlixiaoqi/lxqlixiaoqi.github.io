<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="icon.png" type="image/png">
  <title>LXQ's Space</title>
  <link rel="stylesheet" href="styles/main.css">
<style>
.daily-wallpaper {
  margin: 1rem 0;
  text-align: center;
}
.wallpaper-img {
  max-width: 100%;
  height: auto;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(255, 105, 180, 0.2);
  border: 2px solid #ff69b4;
}
</style>
</head>
<body>
  <!-- 导航栏 -->
  <nav class="navbar">
    <div class="container">
      <a href="index.html" class="logo"><img src="icon.png" class="logo-icon">蘑菇的小站</a>
      <button class="menu-toggle">☰</button>
<div class="nav-links">
        <a href="index.html">主页</a>
        <a href="diary.html">日记</a>
        <a href="mood-wall.html">心情墙</a>
        <a href="gallery.html">照片墙</a>
        <a href="message.html">留言板</a>
        <a href="about.html">关于</a>
      </div>
    </div>
  </nav>

<!-- 透明度调节侧边栏 -->
    <div class="opacity-control">
      <button class="toggle-btn">≡</button>
      <label for="opacityRange">内容不透明度</label>
      <input type="range" id="opacityRange" min="0" max="1" step="0.1" value="0.8" orient="vertical">
    </div>

  <!-- 主内容 -->
  <main class="container">
    <section class="welcome-card card">
      <h1>蘑菇的space🌸</h1>
<div class="sakura-fall"></div>
      <p class="site-intro">这里记录着你的专属回忆：<br>~~~~~~~~~~~~~~~~~~~~~~~~。</p>
      <div class="daily-poem">
        <h3 class="poem-title">每日诗词</h3>
        <div id="poem-sentence" class="poem-sentence">正在加载今日诗词...</div>
        <div id="poem-info" class="poem-info"></div>
      </div>
    </section>

    <!-- 新增照片墙入口 -->
    <div class="content-card card">
      <h2>📸 回忆墙</h2>
      <p❤️</p>
      <a href="gallery.html" class="cta-button">进入照片墙</a>
    </div>

    <section class="latest-content">
      <h2>最近更新 & 小惊喜</h2>
      <div class="letter-section">
        <h3>给你的信 📮</h3>
        <div class="letter-content" id="letterContent"></div>
      </div>
      <div class="card-grid">
        <div class="content-card cute-card birthday-countdown">
          <h2>🎂 生日倒计时</h2>
          <p class="big-text">9月15日还有：<span class="countdown">15天</span></p>
        </div>
        
        <div class="content-card cute-card">
          <h3>✨ 一言</h3>
          <p class="encourage-quote">晓琪，今天的你也在闪闪发光哦～</p>
          <button class="cute-btn" onclick="updateEncourage()">换一句</button>
        </div>
        <div class="content-card cute-card">
          <h3>😊 今日心情</h3>
          <p class="mood-emoji">☁️</p>
          <p>天气晴，和你一起的日子都是晴天～</p>
        </div>
        <div class="content-card">
          <h3>📖 最近日记</h3>
          <p>点击查看最新日记 ➡️</p>
          <a href="diary.html" class="cta-button">进入日记</a>
        </div>
        <div class="content-card">
          <h3>💬 最新留言</h3>
          <p>看看大家的暖心留言 ➡️</p>
          <a href="message.html" class="cta-button">进入留言板</a>
        </div>
        <div class="content-card">
          <h3>🌈 今日心情</h3>
          <p>查看心情墙的温暖记录 ➡️</p>
          <a href="mood-wall.html" class="cta-button">进入心情墙</a>
        </div>
      </div>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
<script>
    // 加载每日诗词
    jinrishici.load(function(result) {
        const sentence = document.getElementById('poem-sentence');
        const info = document.getElementById('poem-info');
        sentence.textContent = result.data.content;
        info.textContent = `【${result.data.origin.dynasty}】${result.data.origin.author}《${result.data.origin.title}》`;
    });

    // 加载信件内容
    async function loadLetter() {
        const response = await fetch('letter.md');
        const mdContent = await response.text();
        document.getElementById('letterContent').innerHTML = marked.parse(mdContent);
    }
    loadLetter();

    // 今日鼓励语句（来自一言API）
    function updateEncourage() {
        fetch('https://v1.hitokoto.cn?encode=json&charset=utf-8')
            .then(response => response.json())
            .then(data => {
                const quoteElement = document.querySelector('.encourage-quote');
                quoteElement.textContent = data.hitokoto;
                if (data.from) {
                    quoteElement.innerHTML += `<br><small>—— ${data.from}</small>`;
                }
            })
            .catch(error => {
                console.error('获取一言失败:', error);
                document.querySelector('.encourage-quote').textContent = '今天的你也在闪闪发光哦～'; // 默认备用语句
            });
    }

  

    // 动态计算生日倒计时
    document.addEventListener('DOMContentLoaded', function() {
    // 初始化蘑菇雨效果
    const mushroomRain = new MushroomRainSystem();
    mushroomRain.start();
      const targetDate = new Date(new Date().getFullYear(), 8, 15); // 9月（0-based月份为8）15日
      const today = new Date();

      // 如果当前日期已过今年生日，计算到明年
      if (today > targetDate) {
        targetDate.setFullYear(targetDate.getFullYear() + 1);
      }

      // 计算天数差
      const timeDiff = targetDate - today;
      const daysLeft = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));

      // 更新页面显示
      document.querySelector('.countdown').textContent = `${daysLeft}天`;
    });
  </script>
  <script src="scripts/common.js"></script>
  <script>
// 移动端菜单切换
const menuToggle = document.querySelector('.menu-toggle');
const navLinks = document.querySelector('.nav-links');

menuToggle.addEventListener('click', () => {
  navLinks.classList.toggle('active');
});
</script>
<script>
// UA检测并应用对应布局
function detectDeviceAndApplyLayout() {
  const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
  const html = document.documentElement;
  
  if (isMobile) {
    html.classList.add('mobile-layout');
    html.classList.remove('desktop-layout');
    // 移动设备额外优化
    optimizeMobileExperience();
  } else {
    html.classList.add('desktop-layout');
    html.classList.remove('mobile-layout');
  }
}

// 移动设备体验优化
function optimizeMobileExperience() {
  // 调整视口设置
  const viewport = document.querySelector('meta[name="viewport"]');
  if (viewport) {
    viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
  }
  
  // 确保蘑菇雨效果适应竖屏
  if (window.MushroomRainSystem) {
    MushroomRainSystem.config.MAX_INSTANCES = 20;
    MushroomRainSystem.config.BASE_SPEED = 1.2;
  }
}

// 初始化检测
document.addEventListener('DOMContentLoaded', detectDeviceAndApplyLayout);
// 窗口大小变化时重新检测
window.addEventListener('resize', detectDeviceAndApplyLayout);
</script>
<script src="scripts/sakura.js"></script>
</body>
</html>
