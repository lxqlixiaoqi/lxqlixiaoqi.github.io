<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="icon.png" type="image/png">
  <title>LXQ's Space</title>
  <link rel="stylesheet" href="styles/main.css">
<style>
.daily-wallpaper {
  margin: 1rem 0;
  text-align: center;
}
.wallpaper-img {
  max-width: 100%;
  height: auto;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(255, 105, 180, 0.2);
  border: 2px solid #ff69b4;
}
</style>
</head>
<body>
  <!-- å¯¼èˆªæ  -->
  <nav class="navbar">
    <div class="container">
      <a href="index.html" class="logo"><img src="icon.png" class="logo-icon">è˜‘è‡çš„å°ç«™</a>
      <button class="menu-toggle">â˜°</button>
<div class="nav-links">
        <a href="index.html">ä¸»é¡µ</a>
        <a href="diary.html">æ—¥è®°</a>
        <a href="mood-wall.html">å¿ƒæƒ…å¢™</a>
        <a href="gallery.html">ç…§ç‰‡å¢™</a>
        <a href="message.html">ç•™è¨€æ¿</a>
        <a href="about.html">å…³äº</a>
      </div>
    </div>
  </nav>

<!-- é€æ˜åº¦è°ƒèŠ‚ä¾§è¾¹æ  -->
    <div class="opacity-control">
      <button class="toggle-btn">â‰¡</button>
      <label for="opacityRange">å†…å®¹ä¸é€æ˜åº¦</label>
      <input type="range" id="opacityRange" min="0" max="1" step="0.1" value="0.8" orient="vertical">
    </div>

  <!-- ä¸»å†…å®¹ -->
  <main class="container">
    <section class="welcome-card card">
      <h1>è˜‘è‡çš„spaceğŸŒ¸</h1>
<div class="sakura-fall"></div>
      <p class="site-intro">è¿™é‡Œè®°å½•ç€ä½ çš„ä¸“å±å›å¿†ï¼š<br>~~~~~~~~~~~~~~~~~~~~~~~~ã€‚</p>
      <div class="daily-poem">
        <h3 class="poem-title">æ¯æ—¥è¯—è¯</h3>
        <div id="poem-sentence" class="poem-sentence">æ­£åœ¨åŠ è½½ä»Šæ—¥è¯—è¯...</div>
        <div id="poem-info" class="poem-info"></div>
      </div>
    </section>

    <!-- æ–°å¢ç…§ç‰‡å¢™å…¥å£ -->
    <div class="content-card card">
      <h2>ğŸ“¸ å›å¿†å¢™</h2>
      <pâ¤ï¸</p>
      <a href="gallery.html" class="cta-button">è¿›å…¥ç…§ç‰‡å¢™</a>
    </div>

    <section class="latest-content">
      <h2>æœ€è¿‘æ›´æ–° & å°æƒŠå–œ</h2>
      <div class="letter-section">
        <h3>ç»™ä½ çš„ä¿¡ ğŸ“®</h3>
        <div class="letter-content" id="letterContent"></div>
      </div>
      <div class="card-grid">
        <div class="content-card cute-card birthday-countdown">
          <h2>ğŸ‚ ç”Ÿæ—¥å€’è®¡æ—¶</h2>
          <p class="big-text">9æœˆ15æ—¥è¿˜æœ‰ï¼š<span class="countdown">15å¤©</span></p>
        </div>
        
        <div class="content-card cute-card">
          <h3>âœ¨ ä¸€è¨€</h3>
          <p class="encourage-quote">æ™“çªï¼Œä»Šå¤©çš„ä½ ä¹Ÿåœ¨é—ªé—ªå‘å…‰å“¦ï½</p>
          <button class="cute-btn" onclick="updateEncourage()">æ¢ä¸€å¥</button>
        </div>
        <div class="content-card cute-card">
          <h3>ğŸ˜Š ä»Šæ—¥å¿ƒæƒ…</h3>
          <p class="mood-emoji">â˜ï¸</p>
          <p>å¤©æ°”æ™´ï¼Œå’Œä½ ä¸€èµ·çš„æ—¥å­éƒ½æ˜¯æ™´å¤©ï½</p>
        </div>
        <div class="content-card">
          <h3>ğŸ“– æœ€è¿‘æ—¥è®°</h3>
          <p>ç‚¹å‡»æŸ¥çœ‹æœ€æ–°æ—¥è®° â¡ï¸</p>
          <a href="diary.html" class="cta-button">è¿›å…¥æ—¥è®°</a>
        </div>
        <div class="content-card">
          <h3>ğŸ’¬ æœ€æ–°ç•™è¨€</h3>
          <p>çœ‹çœ‹å¤§å®¶çš„æš–å¿ƒç•™è¨€ â¡ï¸</p>
          <a href="message.html" class="cta-button">è¿›å…¥ç•™è¨€æ¿</a>
        </div>
        <div class="content-card">
          <h3>ğŸŒˆ ä»Šæ—¥å¿ƒæƒ…</h3>
          <p>æŸ¥çœ‹å¿ƒæƒ…å¢™çš„æ¸©æš–è®°å½• â¡ï¸</p>
          <a href="mood-wall.html" class="cta-button">è¿›å…¥å¿ƒæƒ…å¢™</a>
        </div>
      </div>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
<script>
    // åŠ è½½æ¯æ—¥è¯—è¯
    jinrishici.load(function(result) {
        const sentence = document.getElementById('poem-sentence');
        const info = document.getElementById('poem-info');
        sentence.textContent = result.data.content;
        info.textContent = `ã€${result.data.origin.dynasty}ã€‘${result.data.origin.author}ã€Š${result.data.origin.title}ã€‹`;
    });

    // åŠ è½½ä¿¡ä»¶å†…å®¹
    async function loadLetter() {
        const response = await fetch('letter.md');
        const mdContent = await response.text();
        document.getElementById('letterContent').innerHTML = marked.parse(mdContent);
    }
    loadLetter();

    // ä»Šæ—¥é¼“åŠ±è¯­å¥ï¼ˆæ¥è‡ªä¸€è¨€APIï¼‰
    function updateEncourage() {
        fetch('https://v1.hitokoto.cn?encode=json&charset=utf-8')
            .then(response => response.json())
            .then(data => {
                const quoteElement = document.querySelector('.encourage-quote');
                quoteElement.textContent = data.hitokoto;
                if (data.from) {
                    quoteElement.innerHTML += `<br><small>â€”â€” ${data.from}</small>`;
                }
            })
            .catch(error => {
                console.error('è·å–ä¸€è¨€å¤±è´¥:', error);
                document.querySelector('.encourage-quote').textContent = 'ä»Šå¤©çš„ä½ ä¹Ÿåœ¨é—ªé—ªå‘å…‰å“¦ï½'; // é»˜è®¤å¤‡ç”¨è¯­å¥
            });
    }

  

    // åŠ¨æ€è®¡ç®—ç”Ÿæ—¥å€’è®¡æ—¶
    document.addEventListener('DOMContentLoaded', function() {
    // åˆå§‹åŒ–è˜‘è‡é›¨æ•ˆæœ
    const mushroomRain = new MushroomRainSystem();
    mushroomRain.start();
      const targetDate = new Date(new Date().getFullYear(), 8, 15); // 9æœˆï¼ˆ0-basedæœˆä»½ä¸º8ï¼‰15æ—¥
      const today = new Date();

      // å¦‚æœå½“å‰æ—¥æœŸå·²è¿‡ä»Šå¹´ç”Ÿæ—¥ï¼Œè®¡ç®—åˆ°æ˜å¹´
      if (today > targetDate) {
        targetDate.setFullYear(targetDate.getFullYear() + 1);
      }

      // è®¡ç®—å¤©æ•°å·®
      const timeDiff = targetDate - today;
      const daysLeft = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));

      // æ›´æ–°é¡µé¢æ˜¾ç¤º
      document.querySelector('.countdown').textContent = `${daysLeft}å¤©`;
    });
  </script>
  <script src="scripts/common.js"></script>
  <script>
// ç§»åŠ¨ç«¯èœå•åˆ‡æ¢
const menuToggle = document.querySelector('.menu-toggle');
const navLinks = document.querySelector('.nav-links');

menuToggle.addEventListener('click', () => {
  navLinks.classList.toggle('active');
});
</script>
<script>
// UAæ£€æµ‹å¹¶åº”ç”¨å¯¹åº”å¸ƒå±€
function detectDeviceAndApplyLayout() {
  const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
  const html = document.documentElement;
  
  if (isMobile) {
    html.classList.add('mobile-layout');
    html.classList.remove('desktop-layout');
    // ç§»åŠ¨è®¾å¤‡é¢å¤–ä¼˜åŒ–
    optimizeMobileExperience();
  } else {
    html.classList.add('desktop-layout');
    html.classList.remove('mobile-layout');
  }
}

// ç§»åŠ¨è®¾å¤‡ä½“éªŒä¼˜åŒ–
function optimizeMobileExperience() {
  // è°ƒæ•´è§†å£è®¾ç½®
  const viewport = document.querySelector('meta[name="viewport"]');
  if (viewport) {
    viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
  }
  
  // ç¡®ä¿è˜‘è‡é›¨æ•ˆæœé€‚åº”ç«–å±
  if (window.MushroomRainSystem) {
    MushroomRainSystem.config.MAX_INSTANCES = 20;
    MushroomRainSystem.config.BASE_SPEED = 1.2;
  }
}

// åˆå§‹åŒ–æ£€æµ‹
document.addEventListener('DOMContentLoaded', detectDeviceAndApplyLayout);
// çª—å£å¤§å°å˜åŒ–æ—¶é‡æ–°æ£€æµ‹
window.addEventListener('resize', detectDeviceAndApplyLayout);
</script>
<script src="scripts/sakura.js"></script>
</body>
</html>
